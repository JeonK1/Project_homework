{% load static %}
<!doctype html>

<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" type="text/css" href="{% static 'make_story.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'navbar.css' %}">
    <link rel="stylesheet" type="text/css" href="{% static 'jquery-ui.css' %}">
    <script type="text/javascript" src="{% static 'jquery-3.5.1.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'jquery-ui.js' %}"></script>
    <script type="text/javascript" src="{% static 'navbar.js' %}"></script>
    <script type="text/javascript" src="{% static 'make_story.js' %}"></script>
    <title>Make Story</title>
    <!-- post values -->
    <form method='post' action='/AI_Publisher/make_cover/' target=_self style="display: none;" name="sendJson" id="sendJson">
        <input type='hidden' name='jsonData' id='jsonData' value="{{getJSONData}}"/>
        <input type='hidden' name='groundKeyword' id='groundKeyword' value="{{groundKeyword}}"/>
        <input type='hidden' name='eventKeyword' id='eventKeyword' value="{{eventKeyword}}"/>
    </form>
</head>

<body onload="navbar_function();story_make();select_background();removeSpeechBox();show_text();">

    <div class="BackGround" id="BackGround">
        <!-- 나의 배경 모달창 -->
        <div class="black_bg" onclick="removeModal();"></div>
        <div class="modal_wrap">
            <div id="image_wrap">
                <img class="img_arrow" src="../../static/img/ic_left.png" style="margin-right:10px;" onclick="clickLeft();">
                <form style="display:flex;" action="">
                    <label for="radio_img1">
                        <div class="image_bg" id="imgae_bg1" style="background-image: url('../../static/img/ground/{{bookContetnsList.0}}');">
                            <input type="radio" id="radio_img1" name="select_bg" value="imgae_bg1">
                        </div>
                    </label>
                    <label for="radio_img2">
                        <div class="image_bg" id="imgae_bg2" style="background-image: url('../../static/img/ground/{{bookContetnsList.1}}');">
                            <input type="radio" id="radio_img2" name="select_bg" value="imgae_bg2">
                        </div>
                    </label>
                    <label for="radio_img3">
                        <div class="image_bg" id="imgae_bg3" style="background-image: url('../../static/img/ground/{{bookContetnsList.2}}');">
                            <input type="radio" id="radio_img3" name="select_bg" value="imgae_bg3">
                        </div>
                    </label>
                </form>
                <img src="../../static/img/ic_right.png" onclick="clickRight();">
            </div>
            <div id="modal_title">
                선택된 배경 이미지를 추가합니다.
            </div>
            <div id="modal_context"></div>
            <div id="modal_button_wrap">
                <div class="modal_button" id="modal_button_no" onclick="bgModalNo();">불러오기 취소</div>
                <div class="modal_button" id="modal_button_yes" onclick="bgModalYes();">배경 불러오기</div>
            </div>
        </div>

        <!-- 베이지색 바탕-->
        <div class="Field" id="Field"></div>

        <!--왼쪽 메뉴-->
        <div class="LeftSidebar" id="LeftSidebar">
            <!--왼쪽 카드 뭉치-->
            <div class="Card_small_1" id="Card_small_1">
                    <img class="card_img" id="card_1" src={{getJSONData.mainChar.url}}>
            </div>
            <div class="Card_small_2" id="Card_small_2">
                    <img class="card_img" id="card_2" src={{getJSONData.subChar.url}}>
            </div>
            {% for character in getJSONData.charList %}
                <div class="character_card" id="Card_small_{{forloop.counter | add:2}}">
                <!--<div class="character_card" id="character_{{forloop.counter}}" onclick="sendSubChar({{forloop.counter}})">-->
                    <img class="card_img" id="card_{{forloop.counter}}" src={{character.url}}>
                </div>
            {% endfor %}
            <!--<div class="Card_small_3" id="Card_small_3" style="background-image: url('{{getJSONData.charList.2}}');"></div>-->
            <!--<div class="Card_small_4" id="Card_small_4" style="background-image: url('{{getJSONData.charList.3}}');"></div>-->
        </div>

        <!-- 스토리 보드 -->
        <div class="story_border" id="story_border">
            <div class="story_frame" id="story_frame">
                <div class="left_frame" id="left_frame"></div>
                <div class="right_frame" id="right_frame"></div>
                <!-- 표지 캐릭터 꾸미기 -->
                <div class="decorate_ch_1" id="decorate_ch_1" >
                        <img class="deco_img" id="decorate_1" src={{getJSONData.mainChar.url}}>
                </div>
                <div class="decorate_ch_2" id="decorate_ch_2">
                        <img class="deco_img" id="decorate_2" src={{getJSONData.subChar.url}}>
                </div>
                {% for character in getJSONData.charList %}
                    <div class="decorate_character" id="decorate_ch_{{forloop.counter | add:2}}">
                    <!--<div class="character_card" id="character_{{forloop.counter}}" onclick="sendSubChar({{forloop.counter}})">-->
                        <img class="deco_img" id="decorate_{{forloop.counter}}" src={{character.url}}>
                    </div>
                {% endfor %}
                <div class="text_box" id="text_box"></div>
            </div>
        </div>


        <!-- 가이드와 키워드 -->
        <div class="guide_keyword" id="guide_keyword">
            <div class="guide" id="guide">
                <div class="guide_box" id="guide_box"></div>
                <div class="guide_text_box" id="guide_text_box">
                    <div class="guide_text" id="guide_text">가이드 질문</div>
                    <div class="guide_image" id="guide_image" onmouseenter="createSpeechBox()"></div>

                </div>
            </div>
            <div class="keyword" id="keyword">
                <div class="keyword_box" id="keyword_box"></div>
                <div class="keyword_text" id="keyword_text">상황키워드</div>
            </div>
        </div>

        <!-- 말풍선 -->
        <div id="speech_box">
            <img id="speech_box_closeBtn" src="../../static/img/close_white.png" onclick="removeSpeechBox()">
            <div id="speech_box_context">
                버튼을 클릭해서<br>대화창을 추가하거나<br>제거 할 수 있습니다.
            </div>
        </div>

        <!-- 텍스트 입력 -->
        <input type="text" class="input_text" id="input_text">

        <!--오른쪽 메뉴-->
        <div class="RightSidebar" id="RightSidebar">
            <div id="RightSidebar_scroll">
                <div class="Ground_small">
                    <div class="Ground_small_img" id="Ground_small_1" style="background-image: url('../../static/img/ground/{{bookContetnsList.0}}');" onclick="select_background('Ground_small_1')"></div>
                </div>
                <div class="Ground_small">
                    <div class="Ground_small_img" id="Ground_small_2" style="background-image: url('../../static/img/ground/{{bookContetnsList.1}}');" onclick="select_background('Ground_small_2')"></div>
                </div>
                <div class="Ground_small">
                    <div class="Ground_small_img" id="Ground_small_3" style="background-image: url('../../static/img/ground/{{bookContetnsList.2}}');" onclick="select_background('Ground_small_3')"></div>
                </div>
                <div class="Ground_small">
                    <div class="Ground_small_img" id="Ground_small_4" style="background-image: url('../../static/img/ground/{{bookContetnsList.3}}');" onclick="select_background('Ground_small_4')"></div>
                </div>
                <div class="Ground_small">
                    <div class="Ground_small_img" id="Ground_small_5" style="background-image: url('../../static/img/ground/{{bookContetnsList.4}}');" onclick="select_background('Ground_small_5')"></div>
                </div>
                <div class="Ground_small">
                    <div class="Ground_small_img" id="Ground_small_6" style="background-image: url('../../static/img/ground/{{bookContetnsList.0}}');" onclick="select_background('Ground_small_1')"></div>
                </div>
            </div>
            <div class="camera" id="camera" onclick="createMyBgModal();"></div>
        </div>

        <!-- 발단 전개 위기 절정 결말 -->
        <div class="STEP_BAR" id="STEP_BAR">
            <div class="STEP_1" id="STEP_1">
                <div class="STEP_1_TEXT" id="STEP_1_TEXT">발단</div>
            </div>
            <div class="STEP_2" id="STEP_2">
                <div class="STEP_2_TEXT" id="STEP_2_TEXT">전개</div>
            </div>
            <div class="STEP_3" id="STEP_3">
                <div class="STEP_3_TEXT" id="STEP_3_TEXT">위기</div>
            </div>
            <div class="STEP_4" id="STEP_4">
                <div class="STEP_4_TEXT" id="STEP_4_TEXT">절정</div>
            </div>
            <div class="STEP_5" id="STEP_5">
                <div class="STEP_5_TEXT" id="STEP_5_TEXT">결말</div>
            </div>
        </div>

        <!--다음 버튼-->
        <div class="next_shape" id="next_shape" >
            <div class="next_step_body_1" id="next_step_body_1">
                <div class="next_step_body_2" id="next_step_body_2">
                    <div class="next_step_text" id="next_step_text">Next</div>
                    <div class="next_step_image" id="next_step_image"></div>
                </div>
            </div>
        </div>

        <!-- 네비게이션 바 -->
        <div class="upper_bar" id="upper_bar">
            <div class="AI_Publisher_image" id="AI_Publisher_image"></div>
            <div class="user_icon" id="user_icon"></div>
            <div class="username" id="username"></div>
        </div>
    </div>
</body>
</html>